"use strict";var U=Object.create;var p=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var O=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var M=(t,e)=>{for(var r in e)p(t,r,{get:e[r],enumerable:!0})},S=(t,e,r,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let c of I(e))!D.call(t,c)&&c!==r&&p(t,c,{get:()=>e[c],enumerable:!(a=C(e,c))||a.enumerable});return t};var m=(t,e,r)=>(r=t!=null?U(O(t)):{},S(e||!t||!t.__esModule?p(r,"default",{value:t,enumerable:!0}):r,t)),L=t=>S(p({},"__esModule",{value:!0}),t);var N={};M(N,{default:()=>P});module.exports=L(N);var s=require("@raycast/api");var u=m(require("react")),n=require("@raycast/api");var f=m(require("node:fs")),b=m(require("node:path"));var A=require("react/jsx-runtime");function g(t,e){let r=t instanceof Error?t.message:String(t);return(0,n.showToast)({style:n.Toast.Style.Failure,title:e?.title??"Something went wrong",message:e?.message??r,primaryAction:e?.primaryAction??E(t),secondaryAction:e?.primaryAction?E(t):void 0})}var E=t=>{let e=!0,r="[Extension Name]...",a="";try{let i=JSON.parse((0,f.readFileSync)((0,b.join)(n.environment.assetsPath,"..","package.json"),"utf8"));r=`[${i.title}]...`,a=`https://raycast.com/${i.owner||i.author}/${i.name}`,(!i.owner||i.access==="public")&&(e=!1)}catch{}let c=n.environment.isDevelopment||e,v=t instanceof Error?t?.stack||t?.message||"":String(t);return{title:c?"Copy Logs":"Report Error",onAction(i){i.hide(),c?n.Clipboard.copy(v):(0,n.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(r)}&extension-url=${encodeURI(a)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${v}
\`\`\`
`)}`)}}};var o=require("@raycast/api");var l=require("fs");var T=require("path");var w=m(require("node:os"),1),d,$;function k(t){if(typeof t!="string")throw new TypeError(`Expected a string, got ${typeof t}`);if(d===void 0&&(d=w.default.homedir()),d&&/^~(?=$|\/|\\)/.test(t))return t.replace(/^~/,d);let e=t.match(/^~([^/\\]+)(.*)/);if(e&&($===void 0&&($=w.default.userInfo().username),$)){let r=e[1],a=e[2];if(r===$)return d+a}return t}var F=require("react/jsx-runtime"),h=(0,o.getPreferenceValues)(),x=k(h.downloadsFolder??"~/Downloads"),z=h.showHiddenFiles,V=h.fileOrder,y=h.lastestDownloadOrder,Y=h.downloadsLayout??"list";function W(){return(0,l.readdirSync)(x).filter(e=>z||!e.startsWith(".")).map(e=>{let r=(0,T.join)(x,e);try{let a=(0,l.statSync)(r);return{file:e,path:r,lastModifiedAt:a.mtime,createdAt:a.ctime,addedAt:a.atime,birthAt:a.birthtime}}catch(a){console.warn(`Skipping '${r}' because it could not be stat'd:`,a);return}}).filter(e=>!!e).map(e=>e).sort((e,r)=>{switch(V){case"addTime":return r.addedAt.getTime()-e.addedAt.getTime();case"createTime":return r.createdAt.getTime()-e.createdAt.getTime();case"modifiedTime":default:return r.lastModifiedAt.getTime()-e.lastModifiedAt.getTime()}})}function R(){let t=W();if(!(t.length<1))return y==="addTime"?t.sort((e,r)=>r.addedAt.getTime()-e.addedAt.getTime()):y==="createTime"?t.sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()):y==="modifiedTime"?t.sort((e,r)=>r.lastModifiedAt.getTime()-e.lastModifiedAt.getTime()):y==="birthTime"&&t.sort((e,r)=>r.birthAt.getTime()-e.birthAt.getTime()),t[0]}function _(){try{return(0,l.accessSync)(x,l.constants.R_OK),!0}catch(t){return console.error(t),!1}}async function P(){if(!_()){await(0,s.showHUD)("No permission to access the downloads folder");return}let t;try{t=R()}catch(e){await g(e,{title:"Could not get latest download"});return}if(!t){await(0,s.showHUD)("No downloads found");return}try{await s.Clipboard.paste({file:t.path}),await(0,s.closeMainWindow)(),await(0,s.showHUD)("Pasted latest download"),await(0,s.popToRoot)()}catch(e){await g(e,{title:"Could not paste download"})}}
